#summary LCD驱动流程分析.

= Introduction =

LCD驱动流程实现分析.


= Details =
   我们已经分析了一个platfrom设备的表示， 即就是要填充连个结构体 platfrom_device和platfrom_driver 下面我们着重看s3c2410的lcd驱动的流程 
* LCD流程分析
   驱动入口   /drivers/vedio/s3c2410fb.c中  有这样的代码
{{{
module_init(s3c2410fb_init);
module_exit(s3c2410fb_cleanup);
}}}
  根据驱动模型 我们知道  加载时调用 s3c2410fb_init 函数  注销时调用 s3c2410fb_cleanup 函数 
  我们主要分析 加载时的情况 s3c2410fb_init函数实现如下：
{{{
int __init s3c2410fb_init(void)
{
	int ret = platform_driver_register(&s3c2410fb_driver);

	if (ret == 0)
		ret = platform_driver_register(&s3c2412fb_driver);;

	return ret;
}
}}}
在上面的代码中 我们可以看到主要调用了platform_driver_register(&s3c2410fb_driver)函数  简单的
说就是调用platform_driver_register要将向内核注册一个platform设备的驱动 毫无疑问 这个设备是s3c2410中lcd，通过platform_driver_register函数注册该设备的过程中，它会回调s3c2410fb_driver中的s3c2410fb_probe函数
这样我们这个流程就清楚了  过程如下：
{{{
  module_init() --->
              s3c2410fb_init----->
                       platfrom_driver_register()---->
                                   s3c2410fb_driver---->s3c2410fb_probe
}}}                    