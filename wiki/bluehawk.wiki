杨绍文的页面 [http://code.google.com/p/androidteam/wiki/Team96 返回Team96]        
== 学习资料 ==

 * [http://hi.baidu.com/zkheartboy/blog/item/7699404ef831520bb2de055d.html 引导加载程序vivi 的分析和移植研究]
 * [http://hi.baidu.com/zkheartboy/blog/item/309d59c29e720137e5dd3b84.html linux下编译和烧写vivi以及kernel的操作步骤]
 * [http://idc81.net/qrspx/jiaoshi/class/70.html 嵌入式技术教程]
 * [http://hi.baidu.com/zjsxycli/blog/item/ee0e682181a152589922ed6a.html 移植根文件系统]
 * [http://hi.baidu.com/zkheartboy/blog/item/26dd17e989a33439b90e2d12.html 使用SkyEye仿真]
 * [http://www.android123.com.cn/androidyizhi/ Android移植 开发]

==触摸屏驱动过程==
 * 首先打一个补丁：s3c2410_touchscreen.patch（或手动修改补丁中显示相关文件的代码）
   [http://code.google.com/p/androidteam/wiki/s3c2410_ts_patch_code?ts=1270512750&updated=s3c2410_ts_patch_code  s3c2410_touchscreen.patch代码]
 * 修改{{{arch/arm/mach-s3c2410/mach-smdk2410.c}}}添加如下代码：
   添加头文件： 
{{{ 
   #include <asm/arch/ts.h> 
}}}
  添加结构体：
{{{ 
   static struct s3c2410_ts_mach_info smdk2410_ts_cfg __initdata = { 
        .delay = 20000, 
        .presc = 49, 
        .oversampling_shift = 2, 
   }; 
}}}
  修改driver/input/touchscreen/Makefile,添加如下内容：
{{{
obj-$(CONFIG_TOUCHSCREEN_S3C2410) += s3c2410_ts.o
}}}
  添加支持触摸屏平台代码的信息，这个找到一个名为＊smdk2410_devices[]的结构体指针数组里添加：&s3c_device_ts,然后在smdk2410_map_io函数里添加：
{{{
set_s3c2410ts_info(&smdk2410_ts_cfg); 
}}}  

 * 在arch/arm/mach-s3c2410/include/mach/下新建ts.h文件
   ts.h文件内容如下： 
{{{      
#ifndef __ASM_ARM_S3C2410_TS_H 
#define __ASM_ARM_S3C2410_TS_H 
struct s3c2410_ts_mach_info {      
     int delay; 
     int presc;        
     int oversampling_shift; 
}; 
void set_s3c2410ts_info(struct s3c2410_ts_mach_info *hard_s3c2410ts_info); 


}}}

 * 在driver/input/touchscreen/下面创建驱动文件[http://code.google.com/p/androidteam/wiki/s3c2410_ts_code?ts=1270512980&updated=s3c2410_ts_code  s3c2410_ts.c]
 * 配置内核支持触摸屏驱动make menuconfig 配置支持触摸平驱动
{{{
Device Drivers  ---> 
    Input device support  --->     
          [*]   Touchscreens  --->                                     
                <*>   Samsung S3C2410 touchscreen input driver                                           
                [*]     Samsung S3C2410 touchscreen debug messages 
}}}







== 参考链接 ==
 * [http://hi.baidu.com/zkheartboy/blog/category/Embedded Embedded技术相关]
 * [http://hi.baidu.com/zjsxycli/blog/category/%C7%B6%C8%EB%CA%BDlinux 嵌入式linux]