
= Android源码下载和编译的几个问题 =
 * *系统环境 Ubuntu 9.10 Linux-kernel 2.6.31-20 generic
 * *日期：2010/3/12

根据杨杨同学的wiki，对Android的源码下载，编译，然后对内核编译，经过了几个小时终于成功，但是期间也有一些问题，希望和大家一起分析解决：

=== JDK版本 ===
下载Android源码前，如果在Ubuntu 9.10系统下，需要更换jdk的版本，要换成sun-java5-jdk，如果不更换，在编译Android源码的时候会出现错误。

=== 编译Android源码 ===
下载完源码后，不能直接编译，如果直接make，会出现错误：
{{{
frameworks/policies/base/PolicyConfig.mk:22: *** No module defined for the given PRODUCT_POLICY (android.policy_phone).  
}}}
解决办法：
/Android源码所在目录/build/tools/findleaves.sh中的第89行，

　　这一句find "${@:0:$nargs}" $findargs -type f -name "$filename" -print |

　　改为find "${@:1:$nargs-1}" $findargs -type f -name "$filename" -print |

这个错误改过了之后，执行make，又发现错误：
{{{
frameworks/base/tools/aidl/AST.cpp:10: error: 'fprintf' was not declared in this scope
}}}
解决办法：
下载gcc-4.3和g++-4.3，替换最新的gcc-4.4和g++-4.4版本

sudo apt-get install g++-4.3 gcc-4.3

进入/usr/bin目录
删除目录下对gcc-4.4 和 g++-4.4的软链接

rm gcc

rm g++

建立如下链接

ln -s gcc-4.3 gcc

ln -s g++-4.3 g++

执行make sdk命令 ，编译成功

=== END === 